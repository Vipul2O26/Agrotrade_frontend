<app-farmer></app-farmer>

 <!-- Main Content -->
 <div class="container my-4">
  <div class="card shadow-lg p-4">
    <h2 class="mb-3">âž• Add New Product</h2>

    <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="row g-3">

      <!-- Product Name -->
      <div class="col-md-6">
        <label for="name" class="form-label">Product Name *</label>
        <input id="name" type="text" formControlName="name" class="form-control" placeholder="e.g. Organic Wheat"/>
        <div class="text-danger small" *ngIf="productForm.get('name')?.touched && productForm.get('name')?.invalid">
          <span *ngIf="productForm.get('name')?.hasError('required')">Name is required.</span>
          <span *ngIf="productForm.get('name')?.hasError('maxlength')">Max 150 characters.</span>
        </div>
      </div>

      <!-- Description -->
      <div class="col-12">
        <label for="description" class="form-label">Description</label>
        <textarea id="description" rows="3" formControlName="description" class="form-control" placeholder="Short product description"></textarea>
        <div class="text-danger small" *ngIf="productForm.get('description')?.touched && productForm.get('description')?.invalid">
          <span *ngIf="productForm.get('description')?.hasError('maxlength')">Max 500 characters.</span>
        </div>
      </div>

      <!-- Price -->
      <div class="col-md-4">
        <label for="price" class="form-label">Price *</label>
        <input id="price" type="number" formControlName="price" class="form-control" min="0.01" step="0.01"/>
        <div class="text-danger small" *ngIf="productForm.get('price')?.touched && productForm.get('price')?.invalid">
          <span *ngIf="productForm.get('price')?.hasError('required')">Price is required.</span>
          <span *ngIf="productForm.get('price')?.hasError('min')">Must be greater than 0.</span>
        </div>
      </div>

      <!-- Quantity -->
      <div class="col-md-4">
        <label for="quantity" class="form-label">Quantity *</label>
        <input id="quantity" type="number" formControlName="quantity" class="form-control" min="1"/>
        <div class="text-danger small" *ngIf="productForm.get('quantity')?.touched && productForm.get('quantity')?.invalid">
          <span *ngIf="productForm.get('quantity')?.hasError('required')">Quantity is required.</span>
          <span *ngIf="productForm.get('quantity')?.hasError('min')">At least 1 required.</span>
        </div>
      </div>

      <!-- Is Bidding -->
      <div class="col-12 form-check">
        <input type="checkbox" formControlName="isBidding" id="isBidding" class="form-check-input"/>
        <label for="isBidding" class="form-check-label">Enable Bidding</label>
      </div>

      <!-- Image Upload -->
      <div class="col-12">
        <label for="imageUrl" class="form-label">Upload Image</label>
        <input id="imageUrl" type="file" (change)="onFileSelected($event)" class="form-control"/>
        <div *ngIf="selectedFile" class="text-success mt-1">
          ðŸ“· Selected: {{ selectedFile.name }}
        </div>
      </div>

      <!-- Messages -->
      <div class="col-12">
        <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>
        <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
      </div>

      <!-- Submit -->
      <div class="col-12 text-center">
        <button type="submit" class="btn btn-primary px-4" [disabled]="isSubmitting || productForm.invalid">
          {{ isSubmitting ? 'Adding...' : 'Add Product' }}
        </button>
      </div>

    </form>
  </div>
</div>
