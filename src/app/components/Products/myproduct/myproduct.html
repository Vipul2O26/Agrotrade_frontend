<div class="d-flex">
  <!-- Sidebar -->
  <div class="bg-light border-end vh-100 p-3" style="width: 250px;">
    <h4 class="text-success mb-4">
    
    </h4>
    <ul class="nav flex-column">
      <app-header></app-header>
    </ul>
  </div>

  <!-- Main Content -->
  <div class="flex-grow-1 p-4">
    <div class="container mt-4">
      <h2 class="mb-4 text-success fw-bold">
        <i class="bi bi-box-seam me-2"></i> My Products
      </h2>

      <!-- Loading -->
      <div *ngIf="isLoading" class="text-center my-4">
        <div class="spinner-border text-success" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-2 text-muted">Loading products...</p>
      </div>

      <!-- Error -->
      <div *ngIf="errorMessage" class="alert alert-danger shadow-sm rounded-3">
        {{ errorMessage }}
      </div>

      <!-- Product list -->
      <div class="row g-4" *ngIf="!isLoading && !errorMessage && products.length > 0">
        <div class="col-md-4" *ngFor="let product of products">
          <div class="card product-card h-100 position-relative">

            <!-- Sale Type Badge -->
            <span class="badge position-absolute top-0 end-0 m-2 px-3 py-2 rounded-pill"
                  [ngClass]="product.isBidding ? 'bg-warning text-dark' : 'bg-success'">
              {{ product.isBidding ? 'Bidding' : 'Direct Sale' }}
            </span>

            <!-- Product Image -->
            <img *ngIf="product.imageUrl"
                 [src]="product.imageUrl"
                 class="card-img-top product-img"
                 [alt]="product.name">

            <div class="card-body d-flex flex-column">
              <!-- Product Name -->
              <h5 class="card-title text-success fw-bold">{{ product.name }}</h5>

              <!-- Description -->
              <p class="card-text text-muted small mb-2">
                {{ product.description || 'No description available' }}
              </p>

              <!-- Price & Quantity -->
              <p class="mb-1">
                <strong class="text-dark">Price: </strong>
                <span class="price">â‚¹{{ product.price }}</span>
              </p>
              <p class="mb-2">
                <strong class="text-dark">Quantity: </strong>
                <span class="badge bg-light text-dark px-3">{{ product.quantity }}</span>
              </p>

              <!-- Actions -->
              <div class="mt-auto d-flex justify-content-between">
                <button class="btn btn-sm btn-outline-primary rounded-pill px-3"
                        (click)="editProduct(product.productId!)">
                  <i class="bi bi-pencil"></i> Edit
                </button>
                <button class="btn btn-sm btn-outline-danger rounded-pill px-3"
                        (click)="deleteProduct(product.productId!)">
                  <i class="bi bi-trash"></i> Delete
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- No products fallback -->
      <div *ngIf="!isLoading && !errorMessage && products.length === 0"
           class="alert alert-info text-center shadow-sm rounded-3 py-4">
        <i class="bi bi-emoji-neutral fs-3 d-block mb-2"></i>
        No products available.  
        <br>
        <a routerLink="/addproduct" class="btn btn-success mt-3 rounded-pill px-4">
          <i class="bi bi-plus-circle"></i> Add Product
        </a>
      </div>
    </div>
  </div>
</div>
